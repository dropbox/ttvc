<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/dist/index.min.js"></script>
    <script src="/analytics.js"></script>
    <title>Document</title>
  </head>
  <body>
    <h3>Index 2 HTML</h3>
    <ul id="nav">
      <li><a data-goto="/home" href="#">Home</a></li>
      <li><a data-goto="/about" href="#">About</a></li>
    </ul>

    <script type="module">
      import {createHashHistory} from '/node_modules/history/history.production.min.js';
      const history = createHashHistory();

      // set initial path to /home
      history.push('/home');

      // set up link click handlers
      const anchors = document.querySelectorAll('a');
      anchors.forEach((anchor) => {
        const url = anchor.dataset.goto;
        anchor.addEventListener('click', (event) => {
          event.preventDefault(0);
          history.push(url);
        });
      });

      // handle navigation
      history.listen(() => {
        document.documentElement.dispatchEvent(new Event('locationchange', {bubbles: true}));
      });
    </script>
  </body>
</html>
